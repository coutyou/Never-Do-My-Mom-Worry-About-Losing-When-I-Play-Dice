# Never do my mom worry about losing when I play dice

## 游戏规则

* 多名玩家每人拥有相同数量的骰子，每轮游戏中遮住随机摇动。

* 从一名玩家开始，轮流对场上的所有骰子进行猜测，如“场上至少有5个4“。

* 下一名玩家的猜测需要比上一名”大“，这里的比较规则是先比骰子个数，再比点数。
* 如果下一名玩家认为上一名的猜测太离谱，可以对其进行质疑，此时所有人亮出骰子，猜错者进行惩罚。
* 某个点数可以作为赖子，一般为1点，但如果猜测的是代表赖子的点数本身，则不能用其他点数作为赖子。
* 不同地区有不同规则，如顺子当作0点，顺子重新摇动，带赖子的清一色在计算时加一个，等等，在本项目中不考虑，请在本项目的结果上自行判断。

## 原理

易知投骰结果遵循二项式分布：

![](http://latex.codecogs.com/svg.latex?P(X=k)=C_n^k*p^k*(1-p)^{n-k})

其中p为概率，当有赖子时，p=1/3，当没有赖子时，p=1/6；n为骰子总数；k为特定点数骰子的个数。

举个例子，“共有15个骰子，猜测场上至少有5个4“，则对应的n=15，k=5。

## 使用方法

## API

此方法适合任何能使用浏览器的设备，使用浏览器打开链接：[http://172.96.222.154:5088/?n=30](http://172.96.222.154:5088/?n=30)即可。

注意，其中n为参数，代表骰子总数，上方的链接代表n为30时的结果。如果需要修改骰子总数，修改对应网址即可，如骰子总数为10时，修改为[http://172.96.222.154:5088/?n=10](http://172.96.222.154:5088/?n=10)。当参数输入格式错误时，会返回“Error!”。

下面是返回的结果示例：

> Ones Count (p = 1 / 3):
> Exactly 00 in 10:  0.017  |  At least 00 in 10:  1.000
> Exactly 01 in 10:  0.087  |  At least 01 in 10:  0.983
> Exactly 02 in 10:  0.195  |  At least 02 in 10:  0.896
> Exactly 03 in 10:  0.260  |  At least 03 in 10:  0.701
> Exactly 04 in 10:  0.228  |  At least 04 in 10:  0.441
> Exactly 05 in 10:  0.137  |  At least 05 in 10:  0.213
> Exactly 06 in 10:  0.057  |  At least 06 in 10:  0.077
> Exactly 07 in 10:  0.016  |  At least 07 in 10:  0.020
> Exactly 08 in 10:  0.003  |  At least 08 in 10:  0.003
> Exactly 09 in 10:  0.000  |  At least 09 in 10:  0.000
> Exactly 10 in 10:  0.000  |  At least 10 in 10:  0.000
> \------------------------------------------------------
> Ones Not Count (p = 1 / 6):
> Exactly 00 in 10:  0.162  |  At least 00 in 10:  1.000
> Exactly 01 in 10:  0.323  |  At least 01 in 10:  0.838
> Exactly 02 in 10:  0.291  |  At least 02 in 10:  0.515
> Exactly 03 in 10:  0.155  |  At least 03 in 10:  0.225
> Exactly 04 in 10:  0.054  |  At least 04 in 10:  0.070
> Exactly 05 in 10:  0.013  |  At least 05 in 10:  0.015
> Exactly 06 in 10:  0.002  |  At least 06 in 10:  0.002
> Exactly 07 in 10:  0.000  |  At least 07 in 10:  0.000
> Exactly 08 in 10:  0.000  |  At least 08 in 10:  0.000
> Exactly 09 in 10:  0.000  |  At least 09 in 10:  0.000
> Exactly 10 in 10:  0.000  |  At least 10 in 10:  0.000

上半部分为有赖子时的概率，下半部分是无赖子时的概率。

以其中一行为例：

> Exactly 04 in 10:  0.228  |  At least 04 in 10:  0.441

说明10个骰子中**正好**有4个特定点数的骰子的概率为0.228，**至少**有4个（包括4个）特定点数的骰子的概率为0.441。

### iOS

建议使用“快捷指令”App，链接为：[https://www.icloud.com/shortcuts/39600ea793ff4e3f9efef33349d8e55c](https://www.icloud.com/shortcuts/39600ea793ff4e3f9efef33349d8e55c)，使用浏览器打开，点击“获取捷径”即可。

若出现“不受信任的快捷指令”的错误，需要先在“快捷指令”中先运行任意一个官方自带的指令，然后在“设置”->“快捷指令”->“允许不受信任的快捷指令”中打开开关即可。

使用时，点击此快捷指令，输入骰子总数即可，结果中既有带赖子的概率，也有不带赖子的概率，根据需要取用，建议横屏观看结果。

在快捷指令的详细信息（右上角的三个点）中，可以将此快捷指令添加到桌面，类似一个App，方便启动。

可以配合Siri使用，呼出Siri后，念出“骰子”即可。

此外，iOS也可以使用浏览器进行访问，详见上一小节。

### Tips

上述链接中的IP地址（xxx.xxx.xxx.xxx）可能会不时变动，随缘进行更新。修改对应API和“快捷指令”中的IP即可。

当然，如果你有一个公网IP的VPS或者只需要在内网中使用，可以尝试在服务器上运行以下命令：

```bash
python dice.py
```

或是在后台运行：

```bash
 nohup python dice.py > /dev/null 2>&1 &
```